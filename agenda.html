<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Barber Pro | PKACCI Ultra</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0f111a; --card: #1a1d2e; --primary: #8257e5; --accent: #00f2fe; --text: #ffffff; --success: #00ff88; }
        
        body { 
            background: var(--bg); color: var(--text); font-family: 'Poppins', sans-serif; margin: 0; 
            overflow-x: hidden; -webkit-font-smoothing: antialiased;
        }

        .hidden { display: none !important; }

        /* --- ANIMA√á√ïES CORE --- */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(0.98); }
            100% { transform: scale(1); }
        }

        .animate-in { animation: slideUp 0.5s cubic-bezier(0.23, 1, 0.32, 1) both; }

        /* --- UI LOGIN --- */
        .login-view { height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .pin-input { 
            background: var(--card); border: 2px solid var(--primary); color: white; font-size: 2rem; 
            width: 160px; text-align: center; padding: 15px; border-radius: 20px; margin: 20px 0;
            transition: all 0.3s; box-shadow: 0 0 15px rgba(130, 87, 229, 0.2);
        }
        .pin-input:focus { border-color: var(--accent); box-shadow: 0 0 25px rgba(0, 242, 254, 0.3); }

        /* --- UI ADMIN --- */
        .header-admin { padding: 25px 20px; background: rgba(26, 29, 46, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 10; }
        .balance-card { 
            background: linear-gradient(135deg, #8257e5, #4f3299); padding: 25px; border-radius: 24px; 
            margin-top: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }

        .appointment-card { 
            background: var(--card); margin: 15px 0; padding: 18px; border-radius: 20px; 
            display: flex; align-items: center; border: 1px solid rgba(255,255,255,0.05);
            transition: transform 0.2s;
        }
        .appointment-card:active { transform: scale(0.97); }

        /* Gr√°fico Animado */
        .bar { 
            width: 100%; background: rgba(130, 87, 229, 0.2); border-radius: 6px; 
            min-height: 4px; transition: height 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }

        /* --- BOT√ïES --- */
        .btn-main { 
            background: linear-gradient(45deg, var(--primary), var(--accent)); color: white; border: none; 
            padding: 18px; border-radius: 18px; font-weight: 600; cursor: pointer; width: 100%;
            transition: all 0.2s;
        }
        .btn-main:active { transform: scale(0.95); opacity: 0.9; }

        /* FAB com Anima√ß√£o */
        .fab { 
            position: fixed; bottom: 30px; right: 25px; background: var(--primary); 
            width: 60px; height: 60px; border-radius: 22px; display: flex; align-items: center; 
            justify-content: center; color: white; font-size: 2rem; border: none; 
            box-shadow: 0 10px 20px rgba(130, 87, 229, 0.4); z-index: 100;
            animation: pulse 2s infinite;
        }

        /* Cliente View */
        .input-box { 
            background: var(--card); padding: 30px; border-radius: 30px; 
            border: 1px solid rgba(255,255,255,0.05); margin-top: 25px;
        }
    </style>
</head>
<body>

    <div id="loginView" class="login-view hidden animate-in">
        <div style="font-size: 4rem; margin-bottom: 10px;">üõ°Ô∏è</div>
        <h2 style="letter-spacing: -1px;">Sistema Seguro</h2>
        <p style="opacity:0.5; font-size: 0.9rem;">Autentica√ß√£o PKACCI necess√°ria</p>
        <input type="password" id="pinField" class="pin-input" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" inputmode="numeric">
        <button class="btn-main" onclick="checkPin()">DESBLOQUEAR PAINEL</button>
    </div>

    <div id="adminView" class="hidden">
        <header class="header-admin">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2 style="margin:0; font-size: 1.3rem; font-weight: 600;">Barber Intel</h2>
                <button onclick="logout()" style="background:rgba(255,0,0,0.1); border:none; color:#ff4b4b; padding:8px 15px; border-radius:10px; font-size:0.7rem; font-weight:600;">SAIR</button>
            </div>
            <div class="balance-card animate-in">
                <small style="opacity:0.8; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px;">Faturamento Mensal</small>
                <div id="total" style="font-size: 2.2rem; font-weight: 600; margin: 5px 0;">R$ 0,00</div>
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 15px 0;"></div>
                <div style="display:flex; align-items:flex-end; justify-content:space-between; height: 40px; gap: 8px;">
                    <div class="bar" style="height: 40%;"></div>
                    <div class="bar" style="height: 75%;"></div>
                    <div class="bar" style="height: 50%;"></div>
                    <div class="bar" style="height: 90%;"></div>
                    <div class="bar active" id="todayBar" style="height: 0%; background: var(--accent);"></div>
                </div>
            </div>
        </header>
        <div class="container animate-in" id="adminList" style="padding: 20px;"></div>
    </div>

    <div id="clientView" class="container hidden animate-in" style="text-align:center; padding-top:60px;">
        <div style="background: linear-gradient(45deg, var(--primary), var(--accent)); width:80px; height:80px; border-radius:25px; margin:0 auto 20px; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:2rem; box-shadow: 0 10px 20px rgba(130, 87, 229, 0.3);">B</div>
        <h1 style="margin:0; letter-spacing: -1px;">Elite Booking</h1>
        <p style="opacity:0.5; margin-top:5px;">Sua melhor vers√£o come√ßa aqui.</p>
        
        <div class="input-box">
            <input type="text" id="cName" placeholder="Seu nome completo" style="width:100%; padding:18px; margin:10px 0; background:#0f111a; border:1px solid #333; color:white; border-radius:15px; box-sizing:border-box; font-family:inherit;">
            <input type="time" id="cTime" style="width:100%; padding:18px; margin:10px 0; background:#0f111a; border:1px solid #333; color:white; border-radius:15px; box-sizing:border-box; font-family:inherit;">
            <button class="btn-main" style="margin-top: 20px;" onclick="clientBook()">CONFIRMAR AGENDAMENTO</button>
        </div>
    </div>

    <script>
        const PIN_CORRETO = "2026";
        const params = new URLSearchParams(window.location.search);
        const isClient = params.get('view') === 'client';

        document.addEventListener('DOMContentLoaded', () => {
            if(isClient) {
                document.getElementById('clientView').classList.remove('hidden');
            } else {
                if(sessionStorage.getItem('barber_auth') === 'true') {
                    showAdmin();
                } else {
                    document.getElementById('loginView').classList.remove('hidden');
                }
            }
        });

        function checkPin() {
            if(document.getElementById('pinField').value === PIN_CORRETO) {
                sessionStorage.setItem('barber_auth', 'true');
                location.reload();
            } else {
                alert("Acesso Negado!");
                document.getElementById('pinField').value = "";
            }
        }

        function logout() {
            sessionStorage.removeItem('barber_auth');
            location.reload();
        }

        function clientBook() {
            const name = document.getElementById('cName').value;
            const time = document.getElementById('cTime').value;
            if(!name || !time) return;

            const item = { id: Date.now(), name, time, price: 35 };
            let data = JSON.parse(localStorage.getItem('barber_v9')) || [];
            data.push(item);
            localStorage.setItem('barber_v9', JSON.stringify(data));
            
            // Efeito visual de confirma√ß√£o
            alert("‚ú® Reserva confirmada para " + time + "!");
            location.reload();
        }

        function showAdmin() {
            document.getElementById('adminView').classList.remove('hidden');
            renderAdmin();
        }

        function del(id) {
            let data = JSON.parse(localStorage.getItem('barber_v9')) || [];
            data = data.filter(i => i.id !== id);
            localStorage.setItem('barber_v9', JSON.stringify(data));
            renderAdmin();
        }

        function renderAdmin() {
            const list = document.getElementById('adminList');
            const data = JSON.parse(localStorage.getItem('barber_v9')) || [];
            let total = 0;
            list.innerHTML = "";
            
            data.sort((a,b) => a.time.localeCompare(b.time)).forEach((item, index) => {
                total += item.price;
                const card = document.createElement('div');
                card.className = 'appointment-card';
                card.style.animationDelay = (index * 0.1) + 's'; // Cascata de entrada
                card.innerHTML = `
                    <div style="background:#29292e; color:var(--primary); padding:10px; border-radius:12px; font-weight:600; font-size:0.8rem;">${item.time}</div>
                    <div class="client-info">
                        <h3 style="margin:0; font-size:1rem;">${item.name}</h3>
                        <small style="color:var(--success); font-weight:600;">R$ ${item.price},00</small>
                    </div>
                    <button onclick="window.open('https://wa.me/?text=Confirmado!')" style="border:none; background:var(--success); color:#000; padding:10px 15px; border-radius:12px; font-weight:bold; font-size:0.7rem;">ZAP</button>
                    <button onclick="del(${item.id})" style="border:none; background:none; color:#ff4b4b; margin-left:10px; font-size:1.5rem;">√ó</button>
                `;
                list.appendChild(card);
            });
            document.getElementById('total').innerText = `R$ ${total},00`;
            
            // Anima√ß√£o da barra do gr√°fico
            setTimeout(() => {
                const h = Math.min((total/500)*100, 100);
                document.getElementById('todayBar').style.height = (h + 10) + '%';
            }, 300);
        }
    </script>
</body>
</html>
